# ğŸ¦ FIS Banking Text2SQL - Visual Flowcharts and Azure Architecture

## **Approach 1: Pattern Matching Flowchart**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   User Question     â”‚
â”‚ "How many customers â”‚
â”‚   do we have?"      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Pattern Recognitionâ”‚
â”‚      Engine         â”‚
â”‚                     â”‚
â”‚ â€¢ "how many customers"
â”‚ â€¢ "total loan"      â”‚
â”‚ â€¢ "risk rating"     â”‚
â”‚ â€¢ "delinquent"      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Pattern Match?    â”‚
â”‚                     â”‚
â”‚    âœ“ Found Match    â”‚
â”‚    âœ— No Match       â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚              
       â–¼              
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Pre-built SQL      â”‚
â”‚    Execution        â”‚
â”‚                     â”‚
â”‚ SELECT COUNT(*)     â”‚
â”‚ FROM CUSTOMER_      â”‚
â”‚ DIMENSION           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   SQLite Database   â”‚
â”‚   (Local/Cloud)     â”‚
â”‚                     â”‚
â”‚ â€¢ Customer Data     â”‚
â”‚ â€¢ Loan Portfolio    â”‚
â”‚ â€¢ Risk Ratings      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Results         â”‚
â”‚                     â”‚
â”‚ Customer Count: 4449â”‚
â”‚                     â”‚
â”‚ âš¡ Response: <1 sec  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **Azure Services Used - Pattern Matching**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           NO AZURE SERVICES             â”‚
â”‚                                         â”‚
â”‚  âœ“ Local SQLite Database               â”‚
â”‚  âœ“ Pattern Recognition (Local Logic)   â”‚
â”‚  âœ“ Pre-defined SQL Queries            â”‚
â”‚                                         â”‚
â”‚  ğŸ’° Cost: $0 per query                â”‚
â”‚  âš¡ Speed: <1 second                   â”‚
â”‚  ğŸ¯ Accuracy: 100% for 8 patterns     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## **Approach 2: AI-Powered Flowchart**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   User Question     â”‚
â”‚ "Show me loan trendsâ”‚
â”‚ by customer segment"â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Azure OpenAI     â”‚    â”‚   Azure AI Search   â”‚
â”‚   GPT-4o-mini      â”‚â—„â”€â”€â”€â”¤  Schema Retrieval   â”‚
â”‚                    â”‚    â”‚                     â”‚
â”‚ â€¢ Natural Language â”‚    â”‚ â€¢ Database Tables   â”‚
â”‚ â€¢ SQL Generation   â”‚    â”‚ â€¢ Column Metadata   â”‚
â”‚ â€¢ Banking Context  â”‚    â”‚ â€¢ Relationships     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   SQL Query         â”‚
â”‚   Generation        â”‚
â”‚                     â”‚
â”‚ SELECT c.SEGMENT,   â”‚
â”‚ AVG(l.BALANCE),     â”‚
â”‚ COUNT(*) FROM...    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Query Execution   â”‚
â”‚                     â”‚
â”‚ â€¢ SQLite Database   â”‚
â”‚ â€¢ Result Formatting â”‚
â”‚ â€¢ Error Handling    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Results         â”‚
â”‚                     â”‚
â”‚ â€¢ Loan Trends Table â”‚
â”‚ â€¢ Formatted Output  â”‚
â”‚ âš¡ Response: 2-5 sec â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **Azure Services Used - AI-Powered**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AZURE SERVICES STACK                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  ğŸ§  AZURE OPENAI SERVICE                                   â”‚
â”‚     â”œâ”€â”€ Endpoint: fisopenaipoc.openai.azure.com           â”‚
â”‚     â”œâ”€â”€ Model: GPT-4o-mini                                 â”‚
â”‚     â”œâ”€â”€ Function: SQL Generation + Banking Context         â”‚
â”‚     â””â”€â”€ Cost: ~$0.01-0.03 per query                       â”‚
â”‚                                                             â”‚
â”‚  ğŸ” AZURE AI SEARCH                                        â”‚
â”‚     â”œâ”€â”€ Schema Store Index                                 â”‚
â”‚     â”œâ”€â”€ Semantic Search Enabled                            â”‚
â”‚     â”œâ”€â”€ Function: Database Context Retrieval               â”‚
â”‚     â””â”€â”€ Cost: ~$0.01-0.02 per query                       â”‚
â”‚                                                             â”‚
â”‚  ğŸ—„ï¸ LOCAL DATABASE                                         â”‚
â”‚     â”œâ”€â”€ SQLite (fis_database.db)                          â”‚
â”‚     â”œâ”€â”€ Banking Tables & Relationships                     â”‚
â”‚     â””â”€â”€ Query Execution Layer                              â”‚
â”‚                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ’° Total Cost: ~$0.02-0.05 per query                     â”‚
â”‚  âš¡ Performance: 2-5 seconds                               â”‚
â”‚  ğŸ¯ Flexibility: Handles novel questions                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## **Approach 3: AutoGen Multi-Agent Flowchart**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   User Question     â”‚
â”‚"Comprehensive risk  â”‚
â”‚analysis across all â”‚
â”‚    portfolios"      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User Message       â”‚    â”‚   Query Cache       â”‚
â”‚  Rewrite Agent      â”‚â—„â”€â”€â”€â”¤     Agent           â”‚
â”‚                     â”‚    â”‚                     â”‚
â”‚ â€¢ Clarify Intent    â”‚    â”‚ â€¢ Check Previous    â”‚
â”‚ â€¢ Optimize Question â”‚    â”‚ â€¢ Similar Queries   â”‚
â”‚ â€¢ Add Context       â”‚    â”‚ â€¢ Performance Boost â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Schema Selection   â”‚    â”‚   Azure AI Search   â”‚
â”‚      Agent          â”‚â—„â”€â”€â”€â”¤  Multiple Indexes   â”‚
â”‚                     â”‚    â”‚                     â”‚
â”‚ â€¢ Identify Tables   â”‚    â”‚ â€¢ Schema Store      â”‚
â”‚ â€¢ Find Relationshipsâ”‚    â”‚ â€¢ Column Values     â”‚
â”‚ â€¢ Select Columns    â”‚    â”‚ â€¢ Query Cache       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Parallel Query      â”‚    â”‚   Azure OpenAI      â”‚
â”‚ Solving Agent       â”‚â—„â”€â”€â”€â”¤   GPT-4o-mini       â”‚
â”‚                     â”‚    â”‚                     â”‚
â”‚ â€¢ Generate SQL      â”‚    â”‚ â€¢ Multiple Agents   â”‚
â”‚ â€¢ Validate Syntax   â”‚    â”‚ â€¢ Specialized Roles â”‚
â”‚ â€¢ Test Queries      â”‚    â”‚ â€¢ Smart Reasoning   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Query Execution   â”‚
â”‚   & Validation      â”‚
â”‚                     â”‚
â”‚ â€¢ Run SQL Queries   â”‚
â”‚ â€¢ Verify Results    â”‚
â”‚ â€¢ Error Correction  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Answer Agent      â”‚    â”‚   State Store       â”‚
â”‚                     â”‚â—„â”€â”€â”€â”¤   (Memory)          â”‚
â”‚ â€¢ Format Results    â”‚    â”‚                     â”‚
â”‚ â€¢ Add Explanations  â”‚    â”‚ â€¢ Conversation      â”‚
â”‚ â€¢ Generate Follow-upsâ”‚    â”‚ â€¢ Context History   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Rich Results      â”‚
â”‚                     â”‚
â”‚ â€¢ Comprehensive     â”‚
â”‚   Analysis          â”‚
â”‚ â€¢ Explanations      â”‚
â”‚ â€¢ Follow-up         â”‚
â”‚   Suggestions       â”‚
â”‚ âš¡ Response: 5-15s  â”‚
â”‚   (1-3s if cached)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **Azure Services Used - AutoGen Multi-Agent (Full Stack)**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 COMPLETE AZURE AI STACK                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  ğŸ§  AZURE OPENAI SERVICE (Multi-Model)                     â”‚
â”‚     â”œâ”€â”€ Endpoint: fisopenaipoc.openai.azure.com           â”‚
â”‚     â”œâ”€â”€ Models: GPT-4o-mini (multiple deployments)        â”‚
â”‚     â”œâ”€â”€ Agents: 4+ specialized AI agents                   â”‚
â”‚     â”œâ”€â”€ Function: Advanced reasoning & SQL generation      â”‚
â”‚     â””â”€â”€ Cost: ~$0.03-0.08 per query                       â”‚
â”‚                                                             â”‚
â”‚  ğŸ” AZURE AI SEARCH (Triple Index System)                  â”‚
â”‚     â”œâ”€â”€ Schema Store Index (Database Structure)            â”‚
â”‚     â”œâ”€â”€ Query Cache Index (Performance Optimization)       â”‚
â”‚     â”œâ”€â”€ Column Value Store (Sample Data Context)           â”‚
â”‚     â”œâ”€â”€ Semantic Search + Vector Search                    â”‚
â”‚     â”œâ”€â”€ Function: Intelligent data retrieval               â”‚
â”‚     â””â”€â”€ Cost: ~$0.02-0.05 per query                       â”‚
â”‚                                                             â”‚
â”‚  ğŸ’¾ AZURE STORAGE (State Management)                       â”‚
â”‚     â”œâ”€â”€ Account: fisdstoolkit                              â”‚
â”‚     â”œâ”€â”€ Containers: Multiple for caching & state           â”‚
â”‚     â”œâ”€â”€ Function: Conversation memory & performance        â”‚
â”‚     â””â”€â”€ Cost: ~$0.01-0.02 per query                       â”‚
â”‚                                                             â”‚
â”‚  ğŸ”„ ADVANCED FEATURES                                       â”‚
â”‚     â”œâ”€â”€ Query Cache (Learning System)                      â”‚
â”‚     â”œâ”€â”€ State Store (Conversation Context)                 â”‚
â”‚     â”œâ”€â”€ Multi-Agent Orchestration                          â”‚
â”‚     â””â”€â”€ Intelligent Result Validation                      â”‚
â”‚                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ’° Total Cost: ~$0.06-0.15 per query                     â”‚
â”‚  âš¡ Performance: 5-15s (1-3s cached)                       â”‚
â”‚  ğŸ¯ Intelligence: Highest accuracy & context               â”‚
â”‚  ğŸ§  Learning: Improves with usage                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## **Smart Auto Mode Decision Tree**

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   User Question     â”‚
                    â”‚     Analysis        â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Question Pattern   â”‚
                    â”‚     Detection       â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚                  â”‚                  â”‚
            â–¼                  â–¼                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Simple Pattern â”‚  â”‚ Complex Keywordsâ”‚  â”‚  Default Route  â”‚
â”‚     Match       â”‚  â”‚    Detected     â”‚  â”‚                 â”‚
â”‚                 â”‚  â”‚                 â”‚  â”‚                 â”‚
â”‚ "how many"      â”‚  â”‚ "analysis"      â”‚  â”‚ Standard        â”‚
â”‚ "total loan"    â”‚  â”‚ "compare"       â”‚  â”‚ Questions       â”‚
â”‚ "risk rating"   â”‚  â”‚ "correlation"   â”‚  â”‚                 â”‚
â”‚ "delinquent"    â”‚  â”‚ "trend"         â”‚  â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                    â”‚                    â”‚
          â–¼                    â–¼                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PATTERN MATCH   â”‚  â”‚ AUTOGEN MULTI-  â”‚  â”‚   AI-POWERED    â”‚
â”‚    APPROACH     â”‚  â”‚ AGENT APPROACH  â”‚  â”‚    APPROACH     â”‚
â”‚                 â”‚  â”‚                 â”‚  â”‚                 â”‚
â”‚ âš¡ <1 second    â”‚  â”‚ ğŸ§  5-15 seconds â”‚  â”‚ ğŸ¯ 2-5 seconds  â”‚
â”‚ ğŸ’° $0          â”‚  â”‚ ğŸ’° $0.06-0.15   â”‚  â”‚ ğŸ’° $0.02-0.05   â”‚
â”‚ ğŸ¯ 100% accuracyâ”‚  â”‚ ğŸ” Comprehensiveâ”‚  â”‚ âš–ï¸ Balanced     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## **Overall Azure Architecture Map**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        FIS BANKING TEXT2SQL ARCHITECTURE                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  ğŸ‘¤ BUSINESS USERS                                                          â”‚
â”‚     â”‚                                                                       â”‚
â”‚     â–¼                                                                       â”‚
â”‚  ğŸŒ STREAMLIT WEB APPLICATION                                               â”‚
â”‚     â”‚                                                                       â”‚
â”‚     â–¼                                                                       â”‚
â”‚  ğŸ§  SMART ROUTING LAYER                                                     â”‚
â”‚     â”œâ”€â”€ Pattern Match (Local Processing)                                    â”‚
â”‚     â”œâ”€â”€ AI-Powered (Azure OpenAI + AI Search)                             â”‚
â”‚     â””â”€â”€ AutoGen Multi-Agent (Full Azure Stack)                            â”‚
â”‚                                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                            AZURE SERVICES                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  ğŸ§  AZURE OPENAI SERVICE                                                   â”‚
â”‚     â”œâ”€â”€ fisopenaipoc.openai.azure.com                                     â”‚
â”‚     â”œâ”€â”€ GPT-4o-mini (SQL Generation)                                       â”‚
â”‚     â”œâ”€â”€ Text-embedding-ada-002 (Vector Search)                            â”‚
â”‚     â””â”€â”€ Multi-Agent Deployments                                            â”‚
â”‚                                                                             â”‚
â”‚  ğŸ” AZURE AI SEARCH SERVICE                                                â”‚
â”‚     â”œâ”€â”€ fisaisearchpoc.search.windows.net                                 â”‚
â”‚     â”œâ”€â”€ Schema Store Index                                                 â”‚
â”‚     â”œâ”€â”€ Query Cache Index                                                  â”‚
â”‚     â”œâ”€â”€ Column Value Store Index                                           â”‚
â”‚     â””â”€â”€ Semantic + Vector Search                                           â”‚
â”‚                                                                             â”‚
â”‚  ğŸ’¾ AZURE STORAGE ACCOUNT                                                  â”‚
â”‚     â”œâ”€â”€ fisdstoolkit.blob.core.windows.net                               â”‚
â”‚     â”œâ”€â”€ State Management                                                   â”‚
â”‚     â”œâ”€â”€ Query Caching                                                      â”‚
â”‚     â””â”€â”€ Conversation History                                               â”‚
â”‚                                                                             â”‚
â”‚  ğŸ—„ï¸ DATABASE LAYER                                                         â”‚
â”‚     â”œâ”€â”€ SQLite (Local Development)                                         â”‚
â”‚     â”œâ”€â”€ Azure SQL (Production Ready)                                       â”‚
â”‚     â””â”€â”€ Managed Identity Authentication                                     â”‚
â”‚                                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                              SECURITY                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  ğŸ” AUTHENTICATION & AUTHORIZATION                                         â”‚
â”‚     â”œâ”€â”€ System-Assigned Managed Identity                                   â”‚
â”‚     â”œâ”€â”€ User-Assigned Managed Identity                                     â”‚
â”‚     â”œâ”€â”€ API Key Fallback                                                   â”‚
â”‚     â””â”€â”€ Role-Based Access Control (RBAC)                                   â”‚
â”‚                                                                             â”‚
â”‚  ğŸ›¡ï¸ DATA PROTECTION                                                        â”‚
â”‚     â”œâ”€â”€ Data never leaves Azure tenant                                     â”‚
â”‚     â”œâ”€â”€ Encrypted in transit and at rest                                   â”‚
â”‚     â”œâ”€â”€ Audit trails for all queries                                       â”‚
â”‚     â””â”€â”€ Compliance with banking regulations                                 â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## **Performance & Cost Comparison**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    APPROACH     â”‚  RESPONSE TIME  â”‚   COST/QUERY    â”‚   USE CASE      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                 â”‚                 â”‚                 â”‚                 â”‚
â”‚ Pattern Match   â”‚    < 1 sec      â”‚      $0.00      â”‚ Common Banking  â”‚
â”‚                 â”‚      âš¡âš¡âš¡       â”‚       ğŸ’°        â”‚ Questions       â”‚
â”‚                 â”‚                 â”‚                 â”‚                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                 â”‚                 â”‚                 â”‚                 â”‚
â”‚ AI-Powered      â”‚    2-5 sec      â”‚  $0.02-$0.05   â”‚ Flexible        â”‚
â”‚                 â”‚      âš¡âš¡        â”‚      ğŸ’°ğŸ’°       â”‚ Business        â”‚
â”‚                 â”‚                 â”‚                 â”‚ Questions       â”‚
â”‚                 â”‚                 â”‚                 â”‚                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                 â”‚                 â”‚                 â”‚                 â”‚
â”‚ AutoGen Multi-  â”‚   5-15 sec      â”‚  $0.06-$0.15   â”‚ Complex         â”‚
â”‚ Agent           â”‚  (1-3 cached)   â”‚      ğŸ’°ğŸ’°ğŸ’°     â”‚ Analysis &      â”‚
â”‚                 â”‚      âš¡         â”‚                 â”‚ Insights        â”‚
â”‚                 â”‚                 â”‚                 â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
